<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ankita PubSub - Message Broker Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark-mode">
  <!-- Login Screen -->
  <div class="login-screen" id="loginScreen">
    <!-- Animated background orbs -->
    <div class="login-orb login-orb-1"></div>
    <div class="login-orb login-orb-2"></div>
    <div class="login-orb login-orb-3"></div>

    <div class="login-container">
      <div class="login-header">
        <img src="/logo.svg" alt="Ankita PubSub" class="login-logo" />
        <h1>Ankita PubSub</h1>
        <p>Enterprise Message Broker</p>
      </div>

      <form class="login-form" id="loginForm">
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" placeholder="admin@example.com" required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password" required>
        </div>
        <button type="submit" class="btn btn-primary btn-lg btn-block">Sign In</button>

        <div class="login-divider">
          <span>or continue with</span>
        </div>

        <div class="sso-buttons">
          <button type="button" class="btn btn-sso" id="ssoGoogleBtn">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Google
          </button>
          <button type="button" class="btn btn-sso" id="ssoMicrosoftBtn">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path fill="#F25022" d="M1 1h10v10H1z"/>
              <path fill="#00A4EF" d="M1 13h10v10H1z"/>
              <path fill="#7FBA00" d="M13 1h10v10H13z"/>
              <path fill="#FFB900" d="M13 13h10v10H13z"/>
            </svg>
            Microsoft
          </button>
          <button type="button" class="btn btn-sso" id="ssoGithubBtn">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            GitHub
          </button>
        </div>

        <div class="login-footer">
          <p>Demo credentials: <strong>admin@ankita.io</strong> / <strong>admin123</strong></p>
        </div>
      </form>
    </div>
  </div>

  <div class="app" id="mainApp" style="display: none;">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <img src="/logo.svg" alt="Ankita PubSub" class="logo-icon" />
          <div class="logo-text">
            <span class="logo-name">Ankita</span>
            <span class="logo-tagline">PubSub</span>
          </div>
        </div>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-view="overview">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span>Overview</span>
        </a>
        <a href="#" class="nav-item" data-view="topics">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
          <span>Topics</span>
          <span class="nav-badge" id="topicsBadge">0</span>
        </a>
        <a href="#" class="nav-item" data-view="messages">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <span>Messages</span>
          <span class="nav-badge pulse" id="messagesBadge">0</span>
        </a>
        <a href="#" class="nav-item" data-view="subscribers">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span>Subscribers</span>
          <span class="nav-badge" id="subscribersBadge">0</span>
        </a>
        <a href="#" class="nav-item" data-view="consumer-groups">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <circle cx="12" cy="12" r="6"/>
            <circle cx="12" cy="12" r="2"/>
          </svg>
          <span>Consumer Groups</span>
        </a>
        <a href="#" class="nav-item" data-view="dlq">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"/>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            <line x1="10" y1="11" x2="10" y2="17"/>
            <line x1="14" y1="11" x2="14" y2="17"/>
          </svg>
          <span>Dead Letter Queue</span>
          <span class="nav-badge warning" id="dlqBadge">0</span>
        </a>

        <div class="nav-divider"></div>

        <a href="#" class="nav-item" data-view="publish">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13"/>
            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
          </svg>
          <span>Publish Message</span>
        </a>
        <a href="#" class="nav-item" data-view="api-keys">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
          </svg>
          <span>API Keys</span>
        </a>
        <a href="#" class="nav-item" data-view="tenants">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          <span>Tenants</span>
        </a>
        <a href="#" class="nav-item" data-view="settings">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          <span>Settings</span>
        </a>

        <div class="nav-divider"></div>
        <span class="nav-section-title">Enterprise</span>

        <a href="#" class="nav-item" data-view="health">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
          </svg>
          <span>Health Status</span>
          <span class="nav-badge success" id="healthBadge">OK</span>
        </a>
        <a href="#" class="nav-item" data-view="metrics">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
          <span>Prometheus</span>
        </a>
        <a href="#" class="nav-item" data-view="system">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
            <line x1="8" y1="21" x2="16" y2="21"/>
            <line x1="12" y1="17" x2="12" y2="21"/>
          </svg>
          <span>System Info</span>
        </a>
        <a href="#" class="nav-item" data-view="audit">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          <span>Audit Log</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="connection-indicator" id="connectionIndicator">
          <span class="connection-dot"></span>
          <span class="connection-text">Connecting...</span>
        </div>
        <div class="theme-toggle">
          <button class="theme-btn" id="themeToggle" title="Toggle theme">
            <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"/>
              <line x1="12" y1="1" x2="12" y2="3"/>
              <line x1="12" y1="21" x2="12" y2="23"/>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
              <line x1="1" y1="12" x2="3" y2="12"/>
              <line x1="21" y1="12" x2="23" y2="12"/>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
            </svg>
            <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="main-header">
        <div class="header-left">
          <h1 class="page-title" id="pageTitle">Overview</h1>
          <div class="breadcrumb" id="breadcrumb">
            <span>Dashboard</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
            <span>Overview</span>
          </div>
        </div>
        <div class="header-right">
          <div class="header-stats">
            <div class="header-stat">
              <span class="header-stat-value" id="headerMsgRate">0</span>
              <span class="header-stat-label">msg/s</span>
            </div>
            <div class="header-stat">
              <span class="header-stat-value" id="headerUptime">00:00:00</span>
              <span class="header-stat-label">uptime</span>
            </div>
          </div>
          <div class="header-actions">
            <button class="btn btn-icon" id="refreshBtn" title="Refresh">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"/>
                <polyline points="1 20 1 14 7 14"/>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
              </svg>
            </button>
            <button class="btn btn-primary" id="newTopicBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              New Topic
            </button>
            <!-- User Menu -->
            <div class="user-menu" id="userMenu">
              <button class="user-menu-btn" id="userMenuBtn">
                <div class="user-avatar" id="userAvatar">A</div>
                <div class="user-info">
                  <span class="user-name" id="userName">Admin</span>
                  <span class="user-email" id="userEmail">admin@ankita.io</span>
                </div>
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
              <div class="user-dropdown" id="userDropdown">
                <button class="user-dropdown-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Profile
                </button>
                <button class="user-dropdown-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4"/>
                  </svg>
                  Settings
                </button>
                <div class="user-dropdown-divider"></div>
                <button class="user-dropdown-item danger" id="logoutBtn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                  </svg>
                  Sign Out
                </button>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Dynamic Content Area -->
      <div class="content-area" id="contentArea">
        <!-- Overview View (default) -->
        <div class="view active" id="view-overview">
          <!-- Stats Grid -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon blue">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="statTotalMessages">0</span>
                <span class="stat-label">Total Messages</span>
              </div>
              <div class="stat-trend up">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                </svg>
                <span id="statMessagesTrend">+0%</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon green">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="statMsgPerSec">0</span>
                <span class="stat-label">Messages/sec</span>
              </div>
              <div class="stat-chart-mini">
                <canvas id="msgRateChart" height="40"></canvas>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon purple">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="statTopics">0</span>
                <span class="stat-label">Active Topics</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon cyan">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="statConnections">0</span>
                <span class="stat-label">Active Connections</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon orange">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                  <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="statQueued">0</span>
                <span class="stat-label">Queued Messages</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon red">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="statDLQ">0</span>
                <span class="stat-label">Dead Letters</span>
              </div>
            </div>
          </div>

          <!-- Charts Row -->
          <div class="charts-row">
            <div class="chart-card">
              <div class="chart-header">
                <h3>Message Throughput</h3>
                <div class="chart-legend">
                  <span class="legend-item"><span class="legend-dot blue"></span>Published</span>
                  <span class="legend-item"><span class="legend-dot green"></span>Delivered</span>
                </div>
              </div>
              <div class="chart-body">
                <canvas id="throughputChart"></canvas>
              </div>
            </div>
            <div class="chart-card">
              <div class="chart-header">
                <h3>Messages by Topic</h3>
              </div>
              <div class="chart-body">
                <canvas id="topicsChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Live Feed and Top Topics -->
          <div class="split-row">
            <div class="card live-feed-card">
              <div class="card-header">
                <h3>Live Message Feed</h3>
                <div class="card-actions">
                  <label class="toggle-switch">
                    <input type="checkbox" id="autoScrollCheck" checked>
                    <span class="toggle-slider"></span>
                  </label>
                  <span class="toggle-label">Auto-scroll</span>
                  <button class="btn btn-sm btn-ghost" id="clearFeedBtn">Clear</button>
                </div>
              </div>
              <div class="card-body">
                <div class="message-feed" id="liveFeed">
                  <div class="empty-state">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <polyline points="12 6 12 12 16 14"/>
                    </svg>
                    <p>Waiting for messages...</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="card top-topics-card">
              <div class="card-header">
                <h3>Top Topics</h3>
              </div>
              <div class="card-body">
                <div class="top-topics-list" id="topTopicsList">
                  <div class="empty-state small">No topics yet</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Topics View -->
        <div class="view" id="view-topics">
          <div class="view-header">
            <div class="search-bar">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              </svg>
              <input type="text" id="topicSearch" placeholder="Search topics...">
            </div>
            <button class="btn btn-primary" id="createTopicBtn2">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Create Topic
            </button>
          </div>
          <div class="topics-grid" id="topicsGrid">
            <!-- Topics will be rendered here -->
          </div>
        </div>

        <!-- Messages View -->
        <div class="view" id="view-messages">
          <div class="view-header">
            <div class="search-bar large">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              </svg>
              <input type="text" id="messageSearch" placeholder="Search messages by content, topic, or publisher...">
            </div>
            <div class="filter-group">
              <select id="topicFilter" class="select">
                <option value="">All Topics</option>
              </select>
              <select id="timeFilter" class="select">
                <option value="1h">Last Hour</option>
                <option value="24h" selected>Last 24 Hours</option>
                <option value="7d">Last 7 Days</option>
                <option value="all">All Time</option>
              </select>
            </div>
          </div>
          <div class="messages-table-container">
            <table class="data-table" id="messagesTable">
              <thead>
                <tr>
                  <th>Timestamp</th>
                  <th>Topic</th>
                  <th>Publisher</th>
                  <th>Payload</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="messagesTableBody">
                <!-- Messages will be rendered here -->
              </tbody>
            </table>
          </div>
          <div class="pagination" id="messagesPagination">
            <!-- Pagination will be rendered here -->
          </div>
        </div>

        <!-- Subscribers View -->
        <div class="view" id="view-subscribers">
          <div class="subscribers-grid" id="subscribersGrid">
            <!-- Subscribers will be rendered here -->
          </div>
        </div>

        <!-- Consumer Groups View -->
        <div class="view" id="view-consumer-groups">
          <div class="view-header">
            <h2>Consumer Groups</h2>
            <button class="btn btn-primary" id="createGroupBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Create Group
            </button>
          </div>
          <div class="consumer-groups-grid" id="consumerGroupsGrid">
            <!-- Consumer groups will be rendered here -->
          </div>
        </div>

        <!-- Dead Letter Queue View -->
        <div class="view" id="view-dlq">
          <div class="dlq-header">
            <div class="dlq-stats">
              <div class="dlq-stat">
                <span class="dlq-stat-value" id="dlqCount">0</span>
                <span class="dlq-stat-label">Failed Messages</span>
              </div>
            </div>
            <button class="btn btn-warning" id="retryAllDlqBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"/>
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
              </svg>
              Retry All
            </button>
          </div>
          <div class="dlq-list" id="dlqList">
            <!-- DLQ messages will be rendered here -->
          </div>
        </div>

        <!-- Publish View -->
        <div class="view" id="view-publish">
          <div class="publish-container">
            <div class="card publish-card">
              <div class="card-header">
                <h3>Publish Message</h3>
              </div>
              <div class="card-body">
                <form id="publishForm" class="publish-form">
                  <div class="form-group">
                    <label for="pubTopic">Topic</label>
                    <div class="input-with-suggestions">
                      <input type="text" id="pubTopic" placeholder="e.g., orders.created" required>
                      <div class="suggestions" id="topicSuggestions"></div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="pubPayload">Payload (JSON)</label>
                    <textarea id="pubPayload" rows="10" placeholder='{"key": "value"}'></textarea>
                    <div class="json-validation" id="jsonValidation"></div>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label for="pubHeaders">Headers (optional)</label>
                      <input type="text" id="pubHeaders" placeholder='{"x-correlation-id": "123"}'>
                    </div>
                    <div class="form-group">
                      <label for="pubTTL">TTL (ms, optional)</label>
                      <input type="number" id="pubTTL" placeholder="60000">
                    </div>
                  </div>
                  <div class="form-actions">
                    <button type="button" class="btn" id="previewBtn">Preview</button>
                    <button type="submit" class="btn btn-primary btn-lg">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"/>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                      </svg>
                      Publish Message
                    </button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card publish-history-card">
              <div class="card-header">
                <h3>Recent Publishes</h3>
              </div>
              <div class="card-body">
                <div class="publish-history" id="publishHistory">
                  <div class="empty-state small">No recent publishes</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- API Keys View -->
        <div class="view" id="view-api-keys">
          <div class="view-header">
            <h2>API Keys</h2>
            <button class="btn btn-primary" id="createApiKeyBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Create API Key
            </button>
          </div>
          <div class="api-keys-list" id="apiKeysList">
            <!-- API keys will be rendered here -->
          </div>
        </div>

        <!-- Health Status View -->
        <div class="view" id="view-health">
          <div class="health-dashboard">
            <div class="health-status-card" id="healthStatusCard">
              <div class="health-status-header">
                <div class="health-status-icon healthy" id="healthStatusIcon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                  </svg>
                </div>
                <div class="health-status-info">
                  <h2 id="healthStatusText">Healthy</h2>
                  <p id="healthStatusUptime">Uptime: 0s</p>
                </div>
                <button class="btn btn-primary" id="refreshHealthBtn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"/>
                    <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                  </svg>
                  Refresh
                </button>
              </div>
            </div>

            <div class="health-checks-grid" id="healthChecksGrid">
              <!-- Health checks will be rendered here -->
            </div>

            <div class="health-endpoints-card">
              <h3>Health Endpoints</h3>
              <div class="endpoints-list">
                <div class="endpoint-item">
                  <span class="endpoint-method">GET</span>
                  <code>/health</code>
                  <span class="endpoint-desc">Detailed health status</span>
                  <a href="/health" target="_blank" class="btn btn-sm">Open</a>
                </div>
                <div class="endpoint-item">
                  <span class="endpoint-method">GET</span>
                  <code>/health/live</code>
                  <span class="endpoint-desc">Kubernetes liveness probe</span>
                  <a href="/health/live" target="_blank" class="btn btn-sm">Open</a>
                </div>
                <div class="endpoint-item">
                  <span class="endpoint-method">GET</span>
                  <code>/health/ready</code>
                  <span class="endpoint-desc">Kubernetes readiness probe</span>
                  <a href="/health/ready" target="_blank" class="btn btn-sm">Open</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Prometheus Metrics View -->
        <div class="view" id="view-metrics">
          <div class="metrics-dashboard">
            <div class="metrics-header-card">
              <h2>Prometheus Metrics</h2>
              <p>Export metrics in Prometheus text format for monitoring and alerting</p>
              <div class="metrics-actions">
                <a href="/metrics" target="_blank" class="btn btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                    <polyline points="15 3 21 3 21 9"/>
                    <line x1="10" y1="14" x2="21" y2="3"/>
                  </svg>
                  Open /metrics
                </a>
                <button class="btn" id="copyMetricsUrlBtn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                  </svg>
                  Copy URL
                </button>
              </div>
            </div>

            <div class="metrics-preview-card">
              <div class="metrics-preview-header">
                <h3>Metrics Preview</h3>
                <button class="btn btn-sm" id="refreshMetricsBtn">Refresh</button>
              </div>
              <pre class="metrics-preview" id="metricsPreview">Loading...</pre>
            </div>

            <div class="metrics-info-grid">
              <div class="card">
                <div class="card-header"><h3>Available Metrics</h3></div>
                <div class="card-body">
                  <ul class="metrics-list">
                    <li><code>ankita_messages_published_total</code> - Total messages published</li>
                    <li><code>ankita_messages_delivered_total</code> - Total messages delivered</li>
                    <li><code>ankita_messages_failed_total</code> - Failed deliveries</li>
                    <li><code>ankita_active_connections</code> - WebSocket connections</li>
                    <li><code>ankita_topics_total</code> - Number of topics</li>
                    <li><code>ankita_dead_letter_queue_size</code> - DLQ size</li>
                    <li><code>ankita_uptime_seconds</code> - Server uptime</li>
                    <li><code>ankita_memory_heap_used_bytes</code> - Heap memory</li>
                  </ul>
                </div>
              </div>
              <div class="card">
                <div class="card-header"><h3>Prometheus Config</h3></div>
                <div class="card-body">
                  <p>Add to your <code>prometheus.yml</code>:</p>
                  <pre class="code-block">scrape_configs:
  - job_name: 'ankita-pubsub'
    static_configs:
      - targets: ['localhost:3000']
    metrics_path: '/metrics'
    scrape_interval: 15s</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- System Info View -->
        <div class="view" id="view-system">
          <div class="system-dashboard">
            <div class="system-info-grid">
              <div class="system-card">
                <div class="system-card-icon blue">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                    <line x1="8" y1="21" x2="16" y2="21"/>
                    <line x1="12" y1="17" x2="12" y2="21"/>
                  </svg>
                </div>
                <div class="system-card-content">
                  <h4>Environment</h4>
                  <span class="system-value" id="sysEnvironment">development</span>
                </div>
              </div>
              <div class="system-card">
                <div class="system-card-icon green">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                  </svg>
                </div>
                <div class="system-card-content">
                  <h4>Uptime</h4>
                  <span class="system-value" id="sysUptime">00:00:00</span>
                </div>
              </div>
              <div class="system-card">
                <div class="system-card-icon purple">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                  </svg>
                </div>
                <div class="system-card-content">
                  <h4>Version</h4>
                  <span class="system-value">1.0.0</span>
                </div>
              </div>
              <div class="system-card">
                <div class="system-card-icon orange">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                  </svg>
                </div>
                <div class="system-card-content">
                  <h4>Runtime</h4>
                  <span class="system-value">Bun</span>
                </div>
              </div>
            </div>

            <div class="memory-card">
              <h3>Memory Usage</h3>
              <div class="memory-bars">
                <div class="memory-bar-item">
                  <div class="memory-bar-label">
                    <span>Heap Used</span>
                    <span id="memHeapUsed">0 MB</span>
                  </div>
                  <div class="memory-bar">
                    <div class="memory-bar-fill blue" id="memHeapUsedBar" style="width: 0%"></div>
                  </div>
                </div>
                <div class="memory-bar-item">
                  <div class="memory-bar-label">
                    <span>Heap Total</span>
                    <span id="memHeapTotal">0 MB</span>
                  </div>
                  <div class="memory-bar">
                    <div class="memory-bar-fill purple" id="memHeapTotalBar" style="width: 0%"></div>
                  </div>
                </div>
                <div class="memory-bar-item">
                  <div class="memory-bar-label">
                    <span>RSS</span>
                    <span id="memRss">0 MB</span>
                  </div>
                  <div class="memory-bar">
                    <div class="memory-bar-fill green" id="memRssBar" style="width: 0%"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="config-card">
              <h3>Configuration</h3>
              <div class="config-table">
                <table class="data-table">
                  <tbody id="configTable">
                    <tr><td>Port</td><td id="cfgPort">3000</td></tr>
                    <tr><td>Host</td><td id="cfgHost">localhost</td></tr>
                    <tr><td>Max Queue Size</td><td id="cfgMaxQueue">10000</td></tr>
                    <tr><td>Max Message Size</td><td id="cfgMaxMsg">1 MB</td></tr>
                    <tr><td>Message Retention</td><td id="cfgRetention">24 hours</td></tr>
                    <tr><td>Rate Limit</td><td id="cfgRateLimit">1000 req/min</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Audit Log View -->
        <div class="view" id="view-audit">
          <div class="audit-dashboard">
            <div class="audit-header">
              <div class="audit-stats">
                <div class="audit-stat">
                  <span class="audit-stat-value" id="auditTotalEvents">0</span>
                  <span class="audit-stat-label">Total Events</span>
                </div>
                <div class="audit-stat">
                  <span class="audit-stat-value warning" id="auditFailures">0</span>
                  <span class="audit-stat-label">Failures</span>
                </div>
                <div class="audit-stat">
                  <span class="audit-stat-value danger" id="auditSecurityEvents">0</span>
                  <span class="audit-stat-label">Security Events</span>
                </div>
              </div>
              <div class="audit-filters">
                <select id="auditTypeFilter" class="select">
                  <option value="">All Types</option>
                  <option value="auth">Authentication</option>
                  <option value="authz">Authorization</option>
                  <option value="admin">Admin Actions</option>
                  <option value="security">Security</option>
                </select>
                <button class="btn" id="refreshAuditBtn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"/>
                    <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                  </svg>
                  Refresh
                </button>
              </div>
            </div>
            <div class="audit-log-container">
              <table class="data-table" id="auditTable">
                <thead>
                  <tr>
                    <th>Timestamp</th>
                    <th>Event Type</th>
                    <th>Actor</th>
                    <th>Action</th>
                    <th>Outcome</th>
                  </tr>
                </thead>
                <tbody id="auditTableBody">
                  <!-- Audit logs will be rendered here -->
                </tbody>
              </table>
              <div class="empty-state" id="auditEmptyState">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14 2 14 8 20 8"/>
                </svg>
                <p>No audit events yet</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings View -->
        <div class="view" id="view-settings">
          <div class="settings-grid">
            <div class="card settings-card">
              <div class="card-header">
                <h3>General Settings</h3>
              </div>
              <div class="card-body">
                <div class="setting-item">
                  <div class="setting-info">
                    <span class="setting-name">Dark Mode</span>
                    <span class="setting-desc">Enable dark theme for the dashboard</span>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="darkModeToggle" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <span class="setting-name">Auto Refresh</span>
                    <span class="setting-desc">Automatically refresh metrics every 5 seconds</span>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="autoRefreshToggle" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="setting-item">
                  <div class="setting-info">
                    <span class="setting-name">Notifications</span>
                    <span class="setting-desc">Show browser notifications for new messages</span>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notificationsToggle">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>
            <div class="card settings-card">
              <div class="card-header">
                <h3>Message Retention</h3>
              </div>
              <div class="card-body">
                <div class="form-group">
                  <label>Default Retention Period</label>
                  <select id="retentionPeriod" class="select">
                    <option value="3600000">1 Hour</option>
                    <option value="86400000" selected>24 Hours</option>
                    <option value="604800000">7 Days</option>
                    <option value="2592000000">30 Days</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Max Queue Size per Subscriber</label>
                  <input type="number" id="maxQueueSize" value="1000">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tenants View -->
        <div class="view" id="view-tenants">
          <div class="view-header">
            <div class="search-bar">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              </svg>
              <input type="text" id="tenantSearch" placeholder="Search tenants...">
            </div>
            <button class="btn btn-primary" id="newTenantBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Create Tenant
            </button>
          </div>
          <div class="tenants-grid" id="tenantsGrid">
            <!-- Tenants will be rendered here -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modals -->
  <div class="modal" id="createTopicModal">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Create New Topic</h3>
        <button class="modal-close">&times;</button>
      </div>
      <form id="createTopicForm">
        <div class="modal-body">
          <div class="form-group">
            <label>Topic Name</label>
            <input type="text" id="newTopicName" placeholder="e.g., orders.created" required pattern="[a-zA-Z0-9._-]+">
            <small>Use dots to create hierarchies (e.g., orders.created, orders.updated)</small>
          </div>
          <div class="form-group">
            <label>Description (optional)</label>
            <textarea id="newTopicDesc" rows="2" placeholder="What is this topic for?"></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Max Queue Size</label>
              <input type="number" id="newTopicQueueSize" value="1000" min="1">
            </div>
            <div class="form-group">
              <label>Retention (hours)</label>
              <input type="number" id="newTopicRetention" value="24" min="1">
            </div>
          </div>
          <div class="form-group">
            <label>Tags (comma-separated)</label>
            <input type="text" id="newTopicTags" placeholder="production, orders, critical">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn modal-cancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Create Topic</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="messageDetailModal">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog modal-lg">
      <div class="modal-header">
        <h3>Message Details</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="message-detail" id="messageDetailContent">
          <!-- Message details will be rendered here -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" id="copyMessageBtn">Copy JSON</button>
        <button class="btn btn-primary" id="republishBtn">Republish</button>
      </div>
    </div>
  </div>

  <!-- Create Tenant Modal -->
  <div class="modal" id="createTenantModal">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Create New Tenant</h3>
        <button class="modal-close">&times;</button>
      </div>
      <form id="createTenantForm">
        <div class="modal-body">
          <div class="form-group">
            <label>Organization Name</label>
            <input type="text" id="newTenantName" placeholder="e.g., Acme Corporation" required>
          </div>
          <div class="form-group">
            <label>Slug (URL-friendly identifier)</label>
            <input type="text" id="newTenantSlug" placeholder="e.g., acme-corp" required pattern="[a-z0-9-]+">
            <small>Lowercase letters, numbers, and hyphens only</small>
          </div>
          <div class="form-group">
            <label>Admin Email</label>
            <input type="email" id="newTenantEmail" placeholder="admin@acme.com" required>
          </div>
          <div class="form-group">
            <label>Plan</label>
            <select id="newTenantPlan" class="select">
              <option value="free">Free - 10K messages/month</option>
              <option value="starter">Starter - 100K messages/month</option>
              <option value="professional" selected>Professional - 1M messages/month</option>
              <option value="enterprise">Enterprise - Unlimited</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn modal-cancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Create Tenant</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Tenant Usage Modal -->
  <div class="modal" id="tenantUsageModal">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog modal-lg">
      <div class="modal-header">
        <h3>Tenant Usage Report</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div id="tenantUsageContent">
          <!-- Usage report will be rendered here -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn modal-cancel">Close</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="/app.js"></script>
</body>
</html>
